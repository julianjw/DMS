<body>
	<button id='PageNavPrev' name='PageNavPrev' >Previous</button>	
	<button id='PageNavNext' name='PageNavNext' >Next</button>
	<button id='PageNavSubmitB' name='PageNavSubmitB'>Submit</button>

	<div id='holidayD'>
		<label for='holidayT' class='toggle'>Holiday (Where I want to go/what I want to do): </label>
		<div id='holidayD'>
			<textarea id='holidayT' name='holidayT' rows="3" cols="50"></textarea>
		</div>
		<br />

		<label for='stratT' class='toggle'>Strategies and Action: </label>
		<div id='stratD'>
			<textarea id='stratT' name='stratT' rows="3" cols="50"></textarea>
		</div>
		<br />

		<label for='howT' class='toggle'>How/Who/Where: </label>
		<div id='howD'>
			<textarea id='howT' name='howT' rows="3" cols="50"></textarea>
		</div>
		<br />

		<label for='timeframesT' class='toggle'>Timeframes: </label>
		<div id='timeframesD'>
			<textarea id='timeframesT' name='timeframesT' rows="3" cols="50"></textarea>
		</div>
		<br />

		<label for='detailsT' class='toggle'>Details and other information: </label>
		<div id='detailsD'>
			<textarea id='detailsT' name='detailsT' rows="3" cols="50"></textarea>
		</div>
		<br />

		<label for='resourcesT' class='toggle'>Resources required: </label>
		<div id='resourcesD'>
			<textarea id='resourcesT' name='resourcesT' rows="3" cols="50"></textarea>
		</div>
		<br />
	</div>

	<div id='goalsDiv'>
		<button id='goalsAddRecord' name='goalsAddRecord' onclick="Duplicate('goalsD');">Add Another</button>
		<div id='goalsD'></div>
	</div>

	<div id='goalsDTemplate' class='formTemplate'>
		<label for='myGoalT' class='toggle'>What goal I want to achieve: </label>
		<div id='myGoalD'>
			<textarea id='myGoalT' name='myGoalT' rows="3" cols="50"></textarea>
		</div>
		<br />

		<label for='goalStratT' class='toggle'>Strategies and action to achieve goal mentioned above: </label>
		<div id='goalStratD'>
			<textarea id='goalStratT' name='goalStratT' rows="3" cols="50"></textarea>
		</div>
		<br />

		<label for='goalHowT' class='toggle'>How/Who/Where: </label>
		<div id='goalHowD'>
			<textarea id='goalHowT' name='goalHowT' rows="3" cols="50"></textarea>
		</div>
		<br />

		<label for='goalTimeframesT' class='toggle'>Resources required: </label>
		<div id='goalTimeframesD'>
			<textarea id='goalTimeframesT' name='goalTimeframesT' rows="3" cols="50"></textarea>
		</div>
		<br />

		<label for='goalOutcomeT' class='toggle'>Expected Outcomes: </label>
		<div id='goalOutcomeD'>
			<textarea id='goalOutcomeT' name='goalOutcomeT' rows="3" cols="50"></textarea>
		</div>
		<br />

		<label for='goalResourcesT' class='toggle'>Resources required: </label>
		<div id='goalResourcesD'>
			<textarea id='goalResourcesT' name='goalResourcesT' rows="3" cols="50"></textarea>
		</div>
		<br />
	</div>


<script type='text/javascript'>
	var pageDivNav = new Array("holidayD", "goalsDiv");
	var i=0;

	function PageNavigation(dir) {
		for(var i=0; i<pageDivNav.length; i++) {
			if($("#" + pageDivNav[i]).css('display') != 'none') {
				//perform page navigation
				if(dir=="next") {
					$("#PageNavPrev").show();
					$("#" + pageDivNav[i+1]).show();
					//show the submit button and hide next button if we are on the last page
					if(i+1==pageDivNav.length-1) {
						$("#PageNavNext").hide();
						$("#PageNavSubmitB").show();
					}
				}else if(dir=='prev') {
					$("#PageNavNext").show();
					$("#PageNavSubmitB").hide();
					$("#" + pageDivNav[i-1]).show();
					//hide the previous button if we are on the first page
					if(i-1==0) {
						$("#PageNavPrev").hide();
					}
				}
				//hide the current div
				$("#" + pageDivNav[i]).hide();
				break;
			}
		}
	};

	function Duplicate(divName) {
		//$("#"+divName).append($("#" + divName + "Template").children().clone());
		var newaddress= $("#" + divName + "Template").eq(0).clone();
		newaddress.find('textarea').each(function() {
		    this.id= this.id.replace('[0]', '['+i+']');
		});
		$('#' + divName).append(newaddress);
		i++;
	};

	$(document).ready(function() {
		//page load
		alert('testing');
		$("#PageNavSubmitB").hide();
		$("#PageNavPrev").hide();
		$("#goalsDiv").hide();

		//click on the previous button
		$("#PageNavPrev").click(function(){
			PageNavigation('prev');
		});

		//click on the next button
		$("#PageNavNext").click(function(){
			PageNavigation('next');
		});

		//click on toggle class element
		$(".toggle").click(function(event){
			$(this).next().toggle();
		});

		//click on the submit button
		$("#PageNavSubmitB").click(function(){
			var holidayPlan = new Object();
			holidayPlan.detailsAndInfo = $("#holidayT").val();
			holidayPlan.holidayType = $("#detailsT").val();
			holidayPlan.howWhoWhere = $("#howT").val();
			holidayPlan.resourcesRequired = $("#resourcesT").val();
			holidayPlan.strategies = $("#stratT").val();
			holidayPlan.timeframes = $("#timeframeT").val();

            var goalPlan = new Object();
//NEEDS TO BE DYNAMIC


            var planning = new Object();
            planning.holidayPlan = holidayPlan;
            planning.goalPlan = goalPlan;

            var jsonText = JSON.stringify(planning);

            $.ajax({
				url:'./rest/personalplan/planning/' + $.cookie('auth_token') + '/' + $.cookie('user_id') +'/' + personDetails.clientId,
				type: 'POST',
				contentType: 'application/json',
				data: jsonText,
				complete: function(jqXHR, textStatus) {
					alert(textStatus);
				}
			});
		}
		
	});
</script>